---
  export const prerender = true;

  import { type CollectionEntry, getCollection } from "astro:content";
  import BaseLayout from "../../layouts/BaseLayout.astro";
  import { formatDate } from "../../lib/utils";

  const posts = await getCollection("writings");
---
<BaseLayout title="Writing" description="A collection of my writings, rants and incomplete notes.">
  <section>
    <h2 class="font-mono text-xs font-medium uppercase tracking-wider text-tertiary mb-6">
      Writing
    </h2>
    {
        posts.length > 0 ? (
          <ul class="list-none">
        {posts.map((post: CollectionEntry<"writings">) => (
              <li class="py-8 border-b border-border first:pt-0 last:border-b-0">
                <a href={`/writing/${post.data.slug}`} class="post-link block group" >
                  <div class="text-lg font-semibold mb-2 text-primary group-hover:text-accent">{post.data.title}</div>
                        <div class="flex gap-2 items-center mb-3">
                            <span class="font-mono text-xs text-tertiary">{formatDate(post.data.publishedAt!)}</span>
                            <span class="text-tertiary">Â·</span>
                            <span class="font-mono text-xs text-tertiary">{post.data.readingTime}</span>
                        </div>
                        <p class="text-secondary leading-relaxed line-clamp-2">{post.data.description}</p>
                    </a>
                </li>
            ))}
          </ul>
          ) : (
            <div class="py-16 text-center">
              <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-background-secondary mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-tertiary"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
              </div>
              <div class="text-tertiary font-mono text-sm mb-2">No posts yet</div>
              <p class="text-secondary text-sm">Writing will appear here</p>
            </div>
          )
      }
  </section>
</BaseLayout>
