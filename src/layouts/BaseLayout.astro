---
  /** biome-ignore-all lint/correctness/noUnusedVariables: shut up! */
  import "../styles/globals.css";

  import "@fontsource-variable/inter";
  import "@fontsource/jetbrains-mono/400.css";
  import "@fontsource/jetbrains-mono/500.css";
  import { INFO, SOCIALS } from "../lib/data";
  import { routes } from "../types";

  export interface Props {
    title: string | undefined;
    description: string | undefined;
  }

  const { title, description } = Astro.props;
  const metaTitle = Astro.url.pathname === "/" ? "Bachitter Chahal" : `${title} - Bachitter`;
  const metaDescription = description
    ? description
    : "Hi! I am Bachitter Chahal, a Product Engineer based in Vancouver, Canada.";

  const canonicalURL = new URL(Astro.url.pathname, Astro.site);

  const currentYear = new Date().getFullYear();
---
<html lang="en" class="dark">
  <head>
    <!-- Global Metadata -->
    <meta charset="UTF-8">
    <meta name="generator" content={Astro.generator}>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Icons -->
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="apple-touch-icon" href="/apple-icon.png">

    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL}>

    <!-- Primary Meta Tags -->
    <title>{metaTitle}</title>
    <meta name="title" content={metaTitle}>
    <meta name="description" content={metaDescription}>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content={Astro.url}>
    <meta property="og:title" content={title}>
    <meta property="og:description" content={metaDescription}>
    <!-- <meta property="og:image" content={new URL(image, Astro.url)} /> -->

    <!-- Twitter -->
    <meta property="twitter:card" content="summary">
    <meta property="twitter:url" content={Astro.url}>
    <meta property="twitter:title" content={metaTitle}>
    <meta property="twitter:description" content={metaDescription}>

    <!-- Manifest -->
    <!-- <link rel="manifest" href="/manifest.json" /> -->

    <!-- Sitemap -->
    <link rel="sitemap" href={new URL("/sitemap-index.xml", Astro.site)}>

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" href={new URL("/rss.xml", Astro.site)}>

    <!-- Umami Analytics -->
    <script
      is:inline
      defer
      src="https://cloud.umami.is/script.js"
      data-domains="bachitter.dev"
      data-website-id="cfd2d291-8e0a-4160-b788-434caca658aa"
    ></script>
  </head>
  <body class="px-6 py-20 max-w-2xl mx-auto">
    <header class="mb-16">
      <h1 class="text-4xl sm:text-5xl font-semibold tracking-tight leading-tight mb-4 text-primary">
        {INFO.name}
      </h1>
      <p class="text-lg text-secondary mb-6">{INFO.title}</p>
      <p class="text-base leading-relaxed mb-8 text-secondary">{INFO.intro}</p>
      <div class="flex gap-6 mb-0 ">
        {SOCIALS.map(item => (
          <a class="text-accent font-medium hover:underline" href={item.url} target="blank">{item.label}</a>
        ))}
      </div>
    </header>
    <nav class="mb-12 flex gap-4 pb-4 border-b border-border">
      {routes.map(item => {
        const isActive = Astro.routePattern === `${item.path}` ;
        return <a class="data-[active=true]:text-primary font-mono uppercase text-xs font-medium tracking-wider px-0 py-2 hover:text-primary text-secondary" data-active={isActive} href={item.path}>{item.label}</a>
    })}
    </nav>
    <slot/>
    <footer
      class="mt-20 pt-8 border-t border-border flex justify-between items-center flex-wrap gap-4"
    >
      <div class="flex gap-6">
        <a href={`mailto:${INFO.email}`} class="text-accent font-medium hover:underline">Email</a>
        <a href="/rss.xml" class="text-accent font-medium hover:underline">RSS</a>
      </div>
      <div class="font-mono text-xs text-tertiary">
        Â© <span id="footer-year">{currentYear}</span>
        {" "}
        {INFO.name.split(" ")[0]}
      </div>
    </footer>
  </body>
</html>

<script is:inline>
  document.getElementById("footer-year").innerText = new Date().getFullYear();
</script>
